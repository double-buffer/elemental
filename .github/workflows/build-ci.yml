name: Build CI

on:
  push:
    branches: [ input-service ]

jobs:
  build-windows:
    uses: ./.github/workflows/build-windows.yml
    name: 'build-windows'
    secrets: inherit

  build_dotnet:
    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v3

    - name: Setup .NET SDK
      uses: actions/setup-dotnet@v3
      with:
        dotnet-version: 7.0.100

    - name: Configure MSBuild
      uses: microsoft/setup-msbuild@v1.1
      with:
        vs-version: '[17.0, 17.5)'
        msbuild-architecture: x64

    - name: Build Library
      run: |
        dotnet build ./src/Elemental -c Release 
        
    - name: Build Samples
      run: |
        dotnet build ./samples/01-HelloWorld
        dotnet build ./samples/02-HelloWindow
        dotnet build ./samples/03-HelloTriangle
    
